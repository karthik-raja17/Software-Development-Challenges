awk 'BEGIN{FS=",";RS="\n";}{if($1 + $8 >= 1364803829 && $1 <= 1364803829 && (substr($4,0,9) == "172.30.1." || substr($5,0,9) == "172.30.1.")){print $0;}}' | awk 'BEGIN{FS=",";RS="\n";ORS="\n";OFS=",";}{if(substr($4,0,9) == "172.30.1.") print system("geoiplookup " $5 ); else print system("geoiplookup " $4 )}' | egrep -o ": (.*)$" | sed -r 's/: (.*)$/\1/g' | sort | uniq -c | sort -r
